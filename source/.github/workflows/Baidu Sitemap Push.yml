name: Baidu Sitemap Push

on:
  schedule:
    - cron: '0 16 * * *'
  watch:
    types: [started]
  workflow_dispatch:
    inputs:
      name:
        description: '手动触发推送'
        required: false

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@master

    - name: Set Up Python
      uses: actions/setup-python@v1
      with:
        python-version: 3.8

    - name: Install Requests
      run: pip install requests

    - name: Generate Txt
      run: python generate.py

    - name: Baidu Push
      run: curl -H 'Content-Type:text/plain' --data-binary @urls.txt "${{ secrets.TOKEN }}"